---
title: Eventing
sidebar_position: 4
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# üîî Eventing

Eventing allows your system to track key asset lifecycle changes. This provides a clear audit trail, supports compliance, and helps with analytics.

SILstat‚Ñ¢ supports the capture, documentation, and classification of the following life events:
- Hazard Events
- Device Failures
- Proof Tests
- Scheduled and Ad Hoc Maintenance Activities
- Bypasses
- Demands

---

## üìò Event Types

Each event type represents a specific action or state change for a device.

| Event Type      | Description                                                           |
|------------------|----------------------------------------------------------------------|
| **Bypass**       | Indicates that the entity was bypassed and is not in active use.     |
| **Decommission** | The entity has been removed from operation.              |
| **Failure**      | Indicates a device failed.                               |
| **Install**      | A new device or entity was installed.                                |
| **Repair**       | Corrective maintenance was performed.                                |
| **Replace**      | The entity was swapped for another.                                  |
| **Procedure**    | Procedure events can be initiated for Nodes with a Procedure Linked. |
| **Hazard**       | Hazard events can be initiated for Hazard Scenario Nodes.            |

---

## üõ†Ô∏è Creating an Install Event

This is how to create a special Install event for an Area and pass it as part of the payload.
The diagram below shows the overall flow of how the entities relate to each other.

### üîÑ Entity Relationship Flow

![Install Flow Diagram](/img/install-flow-diagram.png)

---

## ‚úÖ Step-by-Step

1. **[Authenticate](./authentication.mdx)** and obtain a valid access token.
2. **Create Area** that is to be installed.
3. **Prepare your payload** setup the required metadata.
4. **Submit the event** using a `POST` request to the `/api/eventmetadatas` endpoint.
5. **Request Approval** for the event.

---

## ‚úÖ Create the Area

This request demonstrates how to create a new Area using a minimal example.

<Tabs> 
<TabItem value="powershell" label="PowerShell">

```powershell
$headers = @{
  Authorization = "Bearer <YOUR_ACCESS_TOKEN>"
  "Content-Type" = "application/json"
  # SelectedOrganizationId = "YOUR_SELECTED_ORGANIZATION" # Optional
}

$body = @{
  id = "123e4567-e89b-12d3-a456-426614174000"
  names = @(
    @{ language = "en"; text = "Example Name" },
  )
  descriptions = @(
    @{ language = "en"; text = "This is an example entity." },
  )
} | ConvertTo-Json -Depth 3

Invoke-RestMethod -Uri "https://api.silstat.exsilentia.com/api/areas" `
  -Method Post -Headers $headers -Body $body
```

</TabItem> 

<TabItem value="curl" label="CURL">

```bash
curl -X POST https://api.silstat.exsilentia.com/api/areas \
  -H "Authorization: Bearer <YOUR_ACCESS_TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "names": [
      {
        "language": "en",
        "text": "Example Area Name"
      }
    ],
    "descriptions": [
      {
        "language": "en",
        "text": "This is an example entity."
      }
    ]
  }'
```

</TabItem> 
</Tabs>

> üìù **Note:**  
> After creating the Area, you should use its `id` to set the `CheckedIds` as part of the Install event.

---

## ‚úÖ Create the Install Event

---

### üì¶ Sample Payload of an Install Event

```json
{
        "Id": "d3f2a0e5-8f1a-4d4f-a0c4-e5ad8f77a9c1",
        "DateStart": "2025-06-23T15:30:31.6778606+00:00",
        "DateEnd": "2025-06-23T15:30:31.6778606+00:00",
        "DateCompleted": "2025-06-23T15:30:31.6778606+00:00",
        "UriSegment": "install/6a7d4c33-0f6d-4bc2-9b41-42c1a760a04c",
        "Names": [
            {
                "Text": "Name of Area Install",
                "LanguageISO639_2": "eng"
            }
        ],
        "Descriptions": [
            {
                "Text": "Description of Area Install",
                "LanguageISO639_2": "eng"
            }
        ],
        "AutogeneratedNames": true,
        "AutogeneratedDescriptions": true,  
        "WorkflowState": 1,   
        "Options":
        {
          "AdditionalData":
          {
            "ShowTime": false,
            "DatePresentationPreference": 0,
            "Steps": {
              "1": true,
              "2": true,
              "3": true,
              "4": true
            },
            "AdditionalOptions": {
              "StartDate": "2025-06-23T15:30:31.6778606+00:00"
            }
          }
        },
        "CheckedIds": {
          "exida.Enterprise.Core.Models.SILstat.AreaEntity": {
            "123e4567-e89b-12d3-a456-426614174000": true
          }
        }
}
```

<Tabs> 
<TabItem value="powershell" label="PowerShell">

```powershell
$headers = @{
  Authorization = "Bearer <YOUR_ACCESS_TOKEN>"
  "Content-Type" = "application/json"
  # SelectedOrganizationId = "YOUR_SELECTED_ORGANIZATION" # Optional
}

$body = @Payload.json

Invoke-RestMethod -Uri "https://api.silstat.exsilentia.com/api/eventmetadatas" `
  -Method Post -Headers $headers -Body $body
```

</TabItem> 

<TabItem value="curl" label="CURL">

```bash
curl -X POST https://api.silstat.exsilentia.com/api/eventmetadatas \
  -H "Authorization: Bearer <YOUR_ACCESS_TOKEN>" \
  -H "Content-Type: application/json" \
  --data-binary "@Payload.json"
```

</TabItem> 
</Tabs>

---

## ‚úÖ Request Approval for the Event

The final step in the workflow is to perform request approval of the event. A separate endpoint is used to approve the event by its unique identifier (`GUID`). Approving an event allows the modifications made by the event to be submitted for processing. The approval will return a status URI that can be used to review the progress.

:::info[Note on approvals]

By default, any user that can create an event, can also approve it. This also means requesting an approval will result in the event being auto approved.

:::

## üì• Required Headers

- `Authorization: Bearer <YOUR_ACCESS_TOKEN>`
- `SelectedOrganizationId: <YOUR_SELECTED_ORGANIZATION>` (if required)

---

### üíª Examples

<Tabs>
<TabItem value="powershell" label="PowerShell">

```powershell
$headers = @{
  Authorization = "Bearer <YOUR_ACCESS_TOKEN>"
  # SelectedOrganizationId = "YOUR_SELECTED_ORGANIZATION" # Optional
}

$eventId = "01234567-89ab-cdef-0123-456789abcdef"
$uri = "https://api.silstat.exsilentia.com/api/eventmetadatas/$eventId/approval?approved=true" # `/$eventId/request` can also be used to request an approval

$response = Invoke-RestMethod -Uri $uri -Method PUT -Headers $headers # GET can be used to auto approve
$response
```

</TabItem> 

<TabItem value="curl" label="CURL">

```bash
# GET {eventId}/request can be used to auto approve
curl -X PUT https://api.silstat.exsilentia.com/api/eventmetadatas/01234567-89ab-cdef-0123-456789abcdef/approval?approved=true \
  -H "Authorization: Bearer <YOUR_ACCESS_TOKEN>" \
```

</TabItem> 
</Tabs>

---

## üéâ Approval Response

The approval endpoint asynchronously processes the event when approving returning JSON with a `statusQueryGetUri`. 

Example response:

```http
{
    "id": "abc123",
    "purgeHistoryDeleteUri": "https://api.silstat.exsilentia.com/runtime/webhooks/durabletask/instances/abc123?code=XXX",
    "sendEventPostUri": "https://api.silstat.exsilentia.com/runtime/webhooks/durabletask/instances/abc123/raiseEvent/{eventName}?code=XXX",
    "statusQueryGetUri": "https://api.silstat.exsilentia.com/runtime/webhooks/durabletask/instances/abc123?code=XXX",
    "terminatePostUri": "https://api.silstat.exsilentia.com/runtime/webhooks/durabletask/instances/abc123/terminate?reason={text}&code=XXX"
}
```

Until the `statusQueryGetUri` request returns a success status (e.g., `200 OK`), the event is being processed.

:::info[Event validation and invalid state of the system]

Events can fail if the state of the entities in the system are not in a valid state for modification (e.g., another event modified them). Or if the Event itself failed validation. In both cases, seeing the result of the `statusQueryGetUri` will change.

If you have questions about the error messages or require further assistance, please contact our [support team](https://support.exida.com/).

:::

Once the event has been successfully processed, the system has been fully updated with the changes from the event. In this case, the Area would be considered installed.